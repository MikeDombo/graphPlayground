"use strict";(self.webpackChunkgraphPlayground=self.webpackChunkgraphPlayground||[]).push([[191],{191:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var o=r(473),n=r(76),a=r(885),i=r(301),l="exportedText",s={importByString:function(e,t){if("json"===t.toLowerCase())try{var r=JSON.parse(e);"nodes"in r&&"edges"in r?(window.network.setData({}),window.main.setData(r,!1,!0,!1)):o.default.showSimpleModal(i.current.DataImportError,"<p>"+i.current.DataImportErrorText+"</p>")}catch(e){o.default.showSimpleModal(i.current.JsonParseError,"<p>"+i.current.JsonParseErrorText+"</p><pre>"+e+"</pre>")}else if("dimacs"===t.toLowerCase()){var l=e.split(/\r?\n/),s=null,c=!1;if(l.forEach((function(e){var t=e.split(/\s+/);if("p"===t[0].toLowerCase()){if("edge"!==t[1].toLowerCase())return o.default.showSimpleModal(i.current.DimacsParseError,"<p>"+o.default.htmlEncode(i.current.DimacsParseErrorText)+"</p>"),void(c=!0);s=new n.default(parseInt(t[2]))}else"e"===t[0].toLowerCase()&&null!==s&&(s=s.addEdge(parseInt(t[1])-1,parseInt(t[2])-1))})),null!==s||c||(o.default.showSimpleModal(i.current.DimacsParseError,"<p>"+i.current.DimacsParseErrorNoProgram+"</p>"),c=!0),!c){var u=a.default.getGraphData(s);u.nodes.forEach((function(e){e.label=e.id.toString()})),window.main.setData(u,!1,!0,!0)}}else o.default.showSimpleModal(i.current.UnrecognizedInputError,"<p>"+i.current.UnrecognizedInputError+".</p>")},makeImportTextModal:function(){o.default.showFormModal((function(e,t){e.modal("hide"),s.importByString(t[0],t[1])}),i.current.ImportGraphFromText,i.current.Import,i.current.Cancel,[{type:"textarea",label:i.current.ImportText,extraAttrs:{style:"height: 20vh; min-height:400px;"}},{type:"select",label:i.current.Format,optionValues:["json","dimacs"],optionText:["JSON","DIMACS"]}])},makeImportFileModal:function(){o.default.showFormModal((function(e,t){e.modal("hide");var r=t[0];if(1===r.length){var n=r[0],a=new FileReader;a.onload=function(e){s.importByString(e.target.result,o.default.getFileExtension(n.name))},a.readAsText(n)}}),i.current.ImportGraphFromFile,i.current.Import,i.current.Cancel,[{type:"file",label:i.current.UploadFile,validationFunc:function(e,t){return t.get(0).files.length>=1||i.current.MustChooseFileError}}])},makeExportFileModal:function(){o.default.showFormModal(null,i.current.ExportGraphToFile,null,i.current.Cancel,[{type:"button",initialValue:i.current.ExportToJson,onclick:function(){s.exportToFile("json")},extraAttrs:{class:"btn btn-sm btn-primary m-1"},clickDismiss:!0},{type:"button",initialValue:i.current.ExportToDimacs,onclick:function(){s.exportToFile("dimacs")},extraAttrs:{class:"btn btn-sm btn-primary"},clickDismiss:!0}],null,!1)},makeExportTextModal:function(){o.default.showFormModal(null,i.current.ExportGraphToText,null,i.current.Cancel,[{type:"button",initialValue:i.current.ExportToJson,onclick:function(){s.exportToText("json")},extraAttrs:{class:"btn btn-sm btn-primary m-1"},clickDismiss:!1},{type:"button",initialValue:i.current.ExportToDimacs,onclick:function(){s.exportToText("dimacs")},extraAttrs:{class:"btn btn-sm btn-primary"},clickDismiss:!1},{type:"textarea",label:"",initialValue:"",extraAttrs:{style:"height: 20vh; min-height:400px; white-space:pre; margin-top: 1rem;"},onclick:function(){document.getElementById(l).select(),document.execCommand("copy")},id:"exportedText"}],(function(e){e.modal("hide")}),!1)},exportToFile:function(e){"json"===e.toLowerCase()?s.downloadFile("graph.json",s.getDataAsJSON()):"dimacs"===e.toLowerCase()&&s.downloadFile("graph.dimacs",s.getDataAsDIMACS())},exportToText:function(e){"json"===e.toLowerCase()?document.getElementById(l).innerHTML=JSON.stringify(JSON.parse(s.getDataAsJSON()),null,2):"dimacs"===e.toLowerCase()&&(document.getElementById(l).innerHTML=s.getDataAsDIMACS())},getDataAsJSON:function(){var e=a.default.getGraphData(a.default.graph);return e.nodes=o.default.keepOnlyKeys(e.nodes,["id","label","color","x","y"]),e.edges=o.default.keepOnlyKeys(e.edges,["from","to","weight","color"]),JSON.stringify(e)},getDataAsDIMACS:function(){var e=a.default.getGraphData(),t="c This Graph was generated and exported from Michael Dombrowski's Graph Playground -- https://mikedombo.github.io/graphPlayground -- https://mikedombrowski.com\n",r=a.default.graph.getFullAdjacency();r=r.filter((function(e){return 0!==e.length}));var o=[];r.forEach((function(e,t){-1===o.indexOf(t+1)&&o.push(t+1),e.forEach((function(e){-1===o.indexOf(e+1)&&o.push(e+1)}))}));var n=0,i="";return e.edges.forEach((function(e){i+="e "+(e.from+1)+" "+(e.to+1)+"\n",n++})),i=i.trim(),(t+="p edge "+o.length+" "+n+"\n")+i},downloadFile:function(e,t){var r=new Blob([t],{type:"text/plain"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{var o=window.document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)}}};const c=s}}]);
//# sourceMappingURL=191-192ef97088f8382ff5db.min.js.map